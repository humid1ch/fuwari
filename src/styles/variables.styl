/* utils */
white(a)
  rgba(255, 255, 255, a)

black(a)
  rgba(0, 0, 0, a)

rainbow-light = linear-gradient(to right, oklch(0.80 0.10 0), oklch(0.80 0.10 30), oklch(0.80 0.10 60), oklch(0.80 0.10 90), oklch(0.80 0.10 120), oklch(0.80 0.10 150), oklch(0.80 0.10 180), oklch(0.80 0.10 210), oklch(0.80 0.10 240), oklch(0.80 0.10 270), oklch(0.80 0.10 300), oklch(0.80 0.10 330), oklch(0.80 0.10 360))
rainbow-dark = linear-gradient(to right, oklch(0.70 0.10 0), oklch(0.70 0.10 30), oklch(0.70 0.10 60), oklch(0.70 0.10 90), oklch(0.70 0.10 120), oklch(0.70 0.10 150), oklch(0.70 0.10 180), oklch(0.70 0.10 210), oklch(0.70 0.10 240), oklch(0.70 0.10 270), oklch(0.70 0.10 300), oklch(0.70 0.10 330), oklch(0.70 0.10 360))

:root
  --radius-large 1rem
  --content-delay 150ms

/* An util to define variables that vary with light and dark mode */
define(vars)
  :root
    for key, value in vars
      {key}: value[0]
  :root.dark
    for key, value in vars
      if length(value) > 1
        {key}: value[1]

define({
  --primary: oklch(0.70 0.14 var(--hue)) oklch(0.75 0.14 var(--hue))
  --page-bg: oklch(0.95 0.01 var(--hue)) oklch(0.16 0.014 var(--hue))
  --card-bg-notrans: white oklch(0.23 0.015 var(--hue))
  --card-bg-trans80: white(0.8) unquote('oklch(0.23 0.015 var(--hue) / 0.8)')
  --card-bg-trans70: white(0.7) unquote('oklch(0.23 0.015 var(--hue) / 0.7)')
  --card-bg-trans60: white(0.6) unquote('oklch(0.23 0.015 var(--hue) / 0.6)')
  --card-bg-trans50: white(0.5) unquote('oklch(0.23 0.015 var(--hue) / 0.5)')
  --card-bg-trans40: white(0.4) unquote('oklch(0.23 0.015 var(--hue) / 0.4)')
  --card-bg-trans30: white(0.3) unquote('oklch(0.23 0.015 var(--hue) / 0.3)')
  --card-bg: var(--card-bg-trans50)

  --blockquote-bg: unquote('oklch(0.95 0.01 var(--hue) / 0.5)') unquote('oklch(0.16 0.014 var(--hue) / 0.5)')

  --btn-content: oklch(0.55 0.12 var(--hue)) oklch(0.75 0.1 var(--hue))

  --btn-regular-bg-notrans: oklch(0.95 0.025 var(--hue)) oklch(0.33 0.035 var(--hue))
  --btn-regular-bg-trans80: unquote('oklch(0.95 0.025 var(--hue) / 0.8)') unquote('oklch(0.33 0.035 var(--hue) / 0.8)')
  --btn-regular-bg-trans70: unquote('oklch(0.95 0.025 var(--hue) / 0.7)') unquote('oklch(0.33 0.035 var(--hue) / 0.7)')
  --btn-regular-bg-trans60: unquote('oklch(0.95 0.025 var(--hue) / 0.6)') unquote('oklch(0.33 0.035 var(--hue) / 0.6)')
  --btn-regular-bg-trans50: unquote('oklch(0.95 0.025 var(--hue) / 0.5)') unquote('oklch(0.33 0.035 var(--hue) / 0.5)')
  --btn-regular-bg-trans40: unquote('oklch(0.95 0.025 var(--hue) / 0.4)') unquote('oklch(0.33 0.035 var(--hue) / 0.4)')
  --btn-regular-bg-trans30: unquote('oklch(0.95 0.025 var(--hue) / 0.3)') unquote('oklch(0.33 0.035 var(--hue) / 0.3)')
  --btn-regular-bg: var(--btn-regular-bg-notrans)

  --btn-regular-bg-hover-notrans: oklch(0.9 0.05 var(--hue)) oklch(0.38 0.04 var(--hue))
  --btn-regular-bg-hover-trans80: unquote('oklch(0.9 0.05 var(--hue) / 0.8)') unquote('oklch(0.38 0.04 var(--hue) / 0.8)')
  --btn-regular-bg-hover-trans70: unquote('oklch(0.9 0.05 var(--hue) / 0.7)') unquote('oklch(0.38 0.04 var(--hue) / 0.7)')
  --btn-regular-bg-hover-trans60: unquote('oklch(0.9 0.05 var(--hue) / 0.6)') unquote('oklch(0.38 0.04 var(--hue) / 0.6)')
  --btn-regular-bg-hover-trans50: unquote('oklch(0.9 0.05 var(--hue) / 0.5)') unquote('oklch(0.38 0.04 var(--hue) / 0.5)')
  --btn-regular-bg-hover-trans40: unquote('oklch(0.9 0.05 var(--hue) / 0.4)') unquote('oklch(0.38 0.04 var(--hue) / 0.4)')
  --btn-regular-bg-hover-trans30: unquote('oklch(0.9 0.05 var(--hue) / 0.3)') unquote('oklch(0.38 0.04 var(--hue) / 0.3)')
  --btn-regular-bg-hover: var(--btn-regular-bg-hover-notrans)

  --btn-regular-bg-active-notrans: oklch(0.85 0.08 var(--hue)) oklch(0.43 0.045 var(--hue))
  --btn-regular-bg-active-trans80: unquote('oklch(0.85 0.08 var(--hue) / 0.8)') unquote('oklch(0.43 0.045 var(--hue) / 0.8)')
  --btn-regular-bg-active-trans70: unquote('oklch(0.85 0.08 var(--hue) / 0.7)') unquote('oklch(0.43 0.045 var(--hue) / 0.7)')
  --btn-regular-bg-active-trans60: unquote('oklch(0.85 0.08 var(--hue) / 0.6)') unquote('oklch(0.43 0.045 var(--hue) / 0.6)')
  --btn-regular-bg-active-trans50: unquote('oklch(0.85 0.08 var(--hue) / 0.5)') unquote('oklch(0.43 0.045 var(--hue) / 0.5)')
  --btn-regular-bg-active-trans40: unquote('oklch(0.85 0.08 var(--hue) / 0.4)') unquote('oklch(0.43 0.045 var(--hue) / 0.4)')
  --btn-regular-bg-active-trans30: unquote('oklch(0.85 0.08 var(--hue) / 0.3)') unquote('oklch(0.43 0.045 var(--hue) / 0.3)')
  --btn-regular-bg-active: var(--btn-regular-bg-active-notrans)

  --btn-plain-bg-hover-notrans: oklch(0.95 0.025 var(--hue)) oklch(0.30 0.035 var(--hue))
  --btn-plain-bg-hover-trans80: unquote('oklch(0.95 0.025 var(--hue) / 0.8)') unquote('oklch(0.30 0.035 var(--hue) / 0.8)')
  --btn-plain-bg-hover-trans70: unquote('oklch(0.95 0.025 var(--hue) / 0.7)') unquote('oklch(0.30 0.035 var(--hue) / 0.7)')
  --btn-plain-bg-hover-trans60: unquote('oklch(0.95 0.025 var(--hue) / 0.6)') unquote('oklch(0.30 0.035 var(--hue) / 0.6)')
  --btn-plain-bg-hover-trans50: unquote('oklch(0.95 0.025 var(--hue) / 0.5)') unquote('oklch(0.30 0.035 var(--hue) / 0.5)')
  --btn-plain-bg-hover-trans40: unquote('oklch(0.95 0.025 var(--hue) / 0.4)') unquote('oklch(0.30 0.035 var(--hue) / 0.4)')
  --btn-plain-bg-hover-trans30: unquote('oklch(0.95 0.025 var(--hue) / 0.3)') unquote('oklch(0.30 0.035 var(--hue) / 0.3)')
  --btn-plain-bg-hover: var(--btn-plain-bg-hover-trans50)

  --btn-plain-bg-active-notrans: oklch(0.98 0.01 var(--hue)) oklch(0.27 0.025 var(--hue))
  --btn-plain-bg-active-trans80: unquote('oklch(0.98 0.01 var(--hue) / 0.8)') unquote('oklch(0.27 0.025 var(--hue) / 0.8)')
  --btn-plain-bg-active-trans70: unquote('oklch(0.98 0.01 var(--hue) / 0.7)') unquote('oklch(0.27 0.025 var(--hue) / 0.7)')
  --btn-plain-bg-active-trans60: unquote('oklch(0.98 0.01 var(--hue) / 0.6)') unquote('oklch(0.27 0.025 var(--hue) / 0.6)')
  --btn-plain-bg-active-trans50: unquote('oklch(0.98 0.01 var(--hue) / 0.5)') unquote('oklch(0.27 0.025 var(--hue) / 0.5)')
  --btn-plain-bg-active-trans40: unquote('oklch(0.98 0.01 var(--hue) / 0.4)') unquote('oklch(0.27 0.025 var(--hue) / 0.4)')
  --btn-plain-bg-active-trans30: unquote('oklch(0.98 0.01 var(--hue) / 0.3)') unquote('oklch(0.27 0.025 var(--hue) / 0.3)')
  --btn-plain-bg-active: var(--btn-plain-bg-active-trans50)

  --btn-card-bg-hover-notrans: oklch(0.98 0.005 var(--hue)) oklch(0.3 0.03 var(--hue))
  --btn-card-bg-hover-trans80: unquote('oklch(0.98 0.005 var(--hue) / 0.8)') unquote('oklch(0.3 0.03 var(--hue) / 0.8)')
  --btn-card-bg-hover-trans70: unquote('oklch(0.98 0.005 var(--hue) / 0.7)') unquote('oklch(0.3 0.03 var(--hue) / 0.7)')
  --btn-card-bg-hover-trans60: unquote('oklch(0.98 0.005 var(--hue) / 0.6)') unquote('oklch(0.3 0.03 var(--hue) / 0.6)')
  --btn-card-bg-hover-trans50: unquote('oklch(0.98 0.005 var(--hue) / 0.5)') unquote('oklch(0.3 0.03 var(--hue) / 0.5)')
  --btn-card-bg-hover-trans40: unquote('oklch(0.98 0.005 var(--hue) / 0.4)') unquote('oklch(0.3 0.03 var(--hue) / 0.4)')
  --btn-card-bg-hover-trans30: unquote('oklch(0.98 0.005 var(--hue) / 0.3)') unquote('oklch(0.3 0.03 var(--hue) / 0.3)')
  --btn-card-bg-hover: var(--btn-card-bg-hover-notrans)

  --btn-card-bg-active-notrans: oklch(0.9 0.03 var(--hue)) oklch(0.35 0.035 var(--hue))
  --btn-card-bg-active-trans80: unquote('oklch(0.9 0.03 var(--hue) / 0.8)') unquote('oklch(0.35 0.035 var(--hue) / 0.8)')
  --btn-card-bg-active-trans70: unquote('oklch(0.9 0.03 var(--hue) / 0.7)') unquote('oklch(0.35 0.035 var(--hue) / 0.7)')
  --btn-card-bg-active-trans60: unquote('oklch(0.9 0.03 var(--hue) / 0.6)') unquote('oklch(0.35 0.035 var(--hue) / 0.6)')
  --btn-card-bg-active-trans50: unquote('oklch(0.9 0.03 var(--hue) / 0.5)') unquote('oklch(0.35 0.035 var(--hue) / 0.5)')
  --btn-card-bg-active-trans40: unquote('oklch(0.9 0.03 var(--hue) / 0.4)') unquote('oklch(0.35 0.035 var(--hue) / 0.4)')
  --btn-card-bg-active-trans30: unquote('oklch(0.9 0.03 var(--hue) / 0.3)') unquote('oklch(0.35 0.035 var(--hue) / 0.3)')
  --btn-card-bg-active: var(--btn-card-bg-active-notrans)

  --enter-btn-bg: var(--btn-regular-bg)
  --enter-btn-bg-hover: var(--btn-regular-bg-hover)
  --enter-btn-bg-active: var(--btn-regular-bg-active)

  --deep-text: oklch(0.25 0.02 var(--hue))

  --title-active: oklch(0.6 0.1 var(--hue))

  --line-divider: black(0.08) white(0.08)

  --line-color: black(0.1) white(0.1)
  --meta-divider: black(0.2) white(0.2)

  --inline-code-bg: var(--btn-regular-bg)
  --inline-code-color: var(--btn-content)
  --selection-bg: oklch(0.90 0.05 var(--hue)) oklch(0.40 0.08 var(--hue))
  --codeblock-selection: oklch(0.40 0.08 var(--hue))
  --codeblock-bg: oklch(0.17 0.015 var(--hue)) oklch(0.17 0.015 var(--hue))
  --codeblock-topbar-bg: oklch(0.3 0.02 var(--hue)) oklch(0.12 0.015 var(--hue))

  --license-block-bg: black(0.03) var(--codeblock-bg)

  --link-underline: oklch(0.93 0.04 var(--hue)) oklch(0.40 0.08 var(--hue))
  --link-hover: oklch(0.95 0.025 var(--hue)) oklch(0.40 0.08 var(--hue))
  --link-active: oklch(0.90 0.05 var(--hue)) oklch(0.35 0.07 var(--hue))

  --float-panel-bg-notrans: white oklch(0.19 0.015 var(--hue))
  --float-panel-bg-trans80: white(0.8) unquote('oklch(0.19 0.015 var(--hue) / 0.8)')
  --float-panel-bg-trans70: white(0.7) unquote('oklch(0.19 0.015 var(--hue) / 0.7)')
  --float-panel-bg-trans60: white(0.6) unquote('oklch(0.19 0.015 var(--hue) / 0.6)')
  --float-panel-bg-trans50: white(0.5) unquote('oklch(0.19 0.015 var(--hue) / 0.5)')
  --float-panel-bg-trans40: white(0.4) unquote('oklch(0.19 0.015 var(--hue) / 0.4)')
  --float-panel-bg-trans30: white(0.3) unquote('oklch(0.19 0.015 var(--hue) / 0.3)')
  --float-panel-bg: var(--float-panel-bg-trans70)

  --scrollbar-bg-light: black(0.4)
  --scrollbar-bg-hover-light: black(0.5)
  --scrollbar-bg-active-light: black(0.6)

  --scrollbar-bg-dark: white(0.4)
  --scrollbar-bg-hover-dark: white(0.5)
  --scrollbar-bg-active-dark: white(0.6)

  --scrollbar-bg: var(--scrollbar-bg-light) var(--scrollbar-bg-dark)
  --scrollbar-bg-hover: var(--scrollbar-bg-hover-light) var(--scrollbar-bg-hover-dark)
  --scrollbar-bg-active: var(--scrollbar-bg-active-light) var(--scrollbar-bg-active-dark)

  --color-selection-bar: rainbow-light rainbow-dark

  --display-light-icon: 1 0
  --display-dark-icon: 0 1

  --admonitions-color-tip: oklch(0.7 0.14 180) oklch(0.75 0.14 180)
  --admonitions-color-note: oklch(0.7 0.14 250) oklch(0.75 0.14 250)
  --admonitions-color-important: oklch(0.7 0.14 310) oklch(0.75 0.14 310)
  --admonitions-color-warning: oklch(0.7 0.14 60) oklch(0.75 0.14 60)
  --admonitions-color-caution: oklch(0.6 0.2 25) oklch(0.65 0.2 25)

  --admonitions-bg-color-tip: unquote('oklch(0.7 0.14 180 / 0.12)') unquote('oklch(0.75 0.14 180 / 0.12)')
  --admonitions-bg-color-note: unquote('oklch(0.7 0.14 250 / 0.12)') unquote('oklch(0.75 0.14 250 / 0.12)')
  --admonitions-bg-color-important: unquote('oklch(0.7 0.14 310 / 0.12)') unquote('oklch(0.75 0.14 310 / 0.12)')
  --admonitions-bg-color-warning: unquote('oklch(0.7 0.14 60 / 0.12)') unquote('oklch(0.75 0.14 60 / 0.12)')
  --admonitions-bg-color-caution: unquote('oklch(0.6 0.2 25 / 0.12)') unquote('oklch(0.65 0.2 25 / 0.12)')

  --toc-badge-bg-notrans: oklch(0.89 0.050 var(--hue)) var(--btn-regular-bg)
  --toc-badge-bg-trans80: unquote('oklch(0.89 0.050 var(--hue) / 0.8)') var(--btn-regular-bg-trans80)
  --toc-badge-bg-trans70: unquote('oklch(0.89 0.050 var(--hue) / 0.7)') var(--btn-regular-bg-trans70)
  --toc-badge-bg-trans60: unquote('oklch(0.89 0.050 var(--hue) / 0.6)') var(--btn-regular-bg-trans60)
  --toc-badge-bg-trans50: unquote('oklch(0.89 0.050 var(--hue) / 0.5)') var(--btn-regular-bg-trans50)
  --toc-badge-bg-trans40: unquote('oklch(0.89 0.050 var(--hue) / 0.4)') var(--btn-regular-bg-trans40)
  --toc-badge-bg-trans30: unquote('oklch(0.89 0.050 var(--hue) / 0.3)') var(--btn-regular-bg-trans30)
  --toc-badge-bg: var(--toc-badge-bg-notrans)

  --toc-btn-hover-notrans: oklch(0.926 0.015 var(--hue)) oklch(0.22 0.02 var(--hue))
  --toc-btn-hover-trans80: unquote('oklch(0.926 0.015 var(--hue) / 0.8)') unquote('oklch(0.22 0.02 var(--hue) / 0.8)')
  --toc-btn-hover-trans70: unquote('oklch(0.926 0.015 var(--hue) / 0.7)') unquote('oklch(0.22 0.02 var(--hue) / 0.7)')
  --toc-btn-hover-trans60: unquote('oklch(0.926 0.015 var(--hue) / 0.6)') unquote('oklch(0.22 0.02 var(--hue) / 0.6)')
  --toc-btn-hover-trans50: unquote('oklch(0.926 0.015 var(--hue) / 0.5)') unquote('oklch(0.22 0.02 var(--hue) / 0.5)')
  --toc-btn-hover-trans40: unquote('oklch(0.926 0.015 var(--hue) / 0.4)') unquote('oklch(0.22 0.02 var(--hue) / 0.4)')
  --toc-btn-hover-trans30: unquote('oklch(0.926 0.015 var(--hue) / 0.3)') unquote('oklch(0.22 0.02 var(--hue) / 0.3)')
  --toc-btn-hover: var(--toc-btn-hover-trans70)

  --toc-btn-active-notrans: oklch(0.90 0.015 var(--hue)) oklch(0.25 0.02 var(--hue))
  --toc-btn-active-trans80: unquote('oklch(0.90 0.015 var(--hue) / 0.8)') unquote('oklch(0.25 0.02 var(--hue) / 0.8)')
  --toc-btn-active-trans70: unquote('oklch(0.90 0.015 var(--hue) / 0.7)') unquote('oklch(0.25 0.02 var(--hue) / 0.7)')
  --toc-btn-active-trans60: unquote('oklch(0.90 0.015 var(--hue) / 0.6)') unquote('oklch(0.25 0.02 var(--hue) / 0.6)')
  --toc-btn-active-trans50: unquote('oklch(0.90 0.015 var(--hue) / 0.5)') unquote('oklch(0.25 0.02 var(--hue) / 0.5)')
  --toc-btn-active-trans40: unquote('oklch(0.90 0.015 var(--hue) / 0.4)') unquote('oklch(0.25 0.02 var(--hue) / 0.4)')
  --toc-btn-active-trans30: unquote('oklch(0.90 0.015 var(--hue) / 0.3)') unquote('oklch(0.25 0.02 var(--hue) / 0.3)')
  --toc-btn-active: var(--toc-btn-active-notrans)

  --toc-item-active-notrans: oklch(0.70 0.13 var(--hue)) oklch(0.35 0.07 var(--hue))
  --toc-item-active-trans80: unquote('oklch(0.70 0.13 var(--hue) / 0.8)') unquote('oklch(0.35 0.07 var(--hue) / 0.8)')
  --toc-item-active-trans70: unquote('oklch(0.70 0.13 var(--hue) / 0.7)') unquote('oklch(0.35 0.07 var(--hue) / 0.7)')
  --toc-item-active-trans60: unquote('oklch(0.70 0.13 var(--hue) / 0.6)') unquote('oklch(0.35 0.07 var(--hue) / 0.6)')
  --toc-item-active-trans50: unquote('oklch(0.70 0.13 var(--hue) / 0.5)') unquote('oklch(0.35 0.07 var(--hue) / 0.5)')
  --toc-item-active-trans40: unquote('oklch(0.70 0.13 var(--hue) / 0.4)') unquote('oklch(0.35 0.07 var(--hue) / 0.4)')
  --toc-item-active-trans30: unquote('oklch(0.70 0.13 var(--hue) / 0.3)') unquote('oklch(0.35 0.07 var(--hue) / 0.3)')
  --toc-item-active: var(--toc-item-active-notrans)

  --toc-width: calc((100vw - var(--page-width)) / 2 - 1rem)
})

/* 手机端：无透明或微透明 */
@media (max-width: 768px)
  :root
    --card-bg: var(--card-bg-trans80)
    --btn-plain-bg-hover: var(--btn-plain-bg-hover-trans80)
    --btn-plain-bg-active: var(--btn-plain-bg-active-trans80)
    --float-panel-bg: var(--float-panel-bg-trans80)
    --toc-btn-hover: var(--toc-btn-hover-trans80)

/* 手机端：无透明或微透明 */
@media (min-width: 769px) and (max-width: 1024px)
  :root
    --card-bg: var(--card-bg-trans80)
    --btn-plain-bg-hover: var(--btn-plain-bg-hover-trans80)
    --btn-plain-bg-active: var(--btn-plain-bg-active-trans80)
    --float-panel-bg: var(--float-panel-bg-trans80)
    --toc-btn-hover: var(--toc-btn-hover-trans80)
